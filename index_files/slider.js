(function(a){a.fn.extend({slider:function(o){var f={slide_items:4,item_width:166},o=a.extend(f,o),k=0,g=o.slide_items,m=".widgets-slider",c=".widgets-slider ul",h=".widgets-slider li",b=".switcher-prev",d=".switcher-next",e=".switcher-dot li",n="switcher-dis",l=".switcher-dot",j="<li>{NUM}</li>";return this.each(function(){var s=this,w=a(h,this).length,t=Math.ceil(w/g),v=t-1,r=w*o.item_width+"px",q=a(c,this),u=a(b+", "+d,this),p=a(e,this);last_nums=w,actionSlider=function(B,z){var y=parseInt(a(m,s).css("width")),A=Math.abs(z-k)*(w-Math.abs(z-k))*0.2*200,x=B.parent().next();x.children("span").removeClass(n);if(z===v){x.children(d).addClass(n)}if(z===0){x.children(b).addClass(n)}B.animate({left:-z*y},A);x.children().children(".on").removeClass();x.children().children(':contains("'+z+'")').addClass("on");k=z};q.css("width",r);if(t>1){for(i=0;i<t;i++){a(l,this).append(j.replace("{NUM}",i))}a(l+" li:first",this).addClass("on")}else{a(d,this).addClass("switcher-dis")}p.live("click",function(z){var x=parseInt(a(this).text()),y=a(this).parent().parent().prev().children();actionSlider(y,x)});u.click(function(A){var y=a(A.target).hasClass("switcher-prev"),z=a(this).parent().prev().children(),x=parseInt(a(this).parent().children().children(".on").text());if(y){x-=1}else{x+=1}x=x<0?0:x;x=x<v?x:v;if(t>1){actionSlider(z,x)}})})}})})(jQuery);